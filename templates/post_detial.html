<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ post.title }} | 投稿詳細</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
</head>
<body class="bg-gray-100 text-gray-800">
  <!-- 投稿本体 -->
  <main class="max-w-3xl mx-auto mt-10 px-4">
    <article class="bg-white shadow-lg rounded-2xl p-6">
        <h1 class="text-3xl font-bold mb-4">{{ post.title }}</h1>
        <div class="text-sm text-gray-500 mb-4">
            <span class="mr-4"><strong>場所:</strong> {{ post.place_name }}</span>
            <span><strong>住所:</strong> {{ post.address }}</span>
        </div>

        {% if post.image_filename %}
            <img src="{{ post.image_filename }}" alt="投稿画像" class="w-full rounded-xl shadow mb-6">
        {% endif %}

        {% if post.annotation %}
            <p class="text-lg leading-relaxed mb-6">{{ post.annotation }}</p>
        {% endif %}

        <div class="grid grid-cols-2 gap-4 text-sm text-gray-700 mb-6">
            <div><strong>投稿者タイプ:</strong> {{ post.poster_type }}</div>
            <div><strong>ロケーションタイプ:</strong> {{ post.location_type }}</div>
        </div>

        <!-- ★ 高評価ボタンを追加 -->
        <form action="/like/{{ post.id }}" method="POST">
            <button type="submit" 
            class="px-4 py-2 bg-green-600 text-white font-semibold rounded hover:bg-green-700 transition">
            👍 高評価
            </button>
        </form>

        <div class="mt-6">
            <a href="/" class="text-blue-600 hover:text-blue-800 font-semibold">← 投稿一覧へ戻る</a>
        </div>
    </article>


    <!-- コメント一覧 -->
    <section class="bg-white shadow-lg rounded-2xl mt-8 p-6">
      <h2 class="text-2xl font-semibold mb-4">コメント一覧</h2>
      {% if comments and comments|length > 0 %}
        <ul class="divide-y divide-gray-200">
          {% for c in comments %}
            <li class="py-3">
              <p class="font-semibold text-gray-900">{{ c.user_name }}</p>
              <p class="text-gray-700">{{ c.content }}</p>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="text-gray-500">まだコメントはありません。</p>
      {% endif %}
    </section>

    <!-- コメント投稿フォーム -->
    <!-- コメント投稿フォーム -->
        <section class="bg-white shadow-lg rounded-2xl mt-8 p-6">
            <h2 class="text-2xl font-semibold mb-4">コメントを投稿</h2>
            <form method="POST" action="/posts/{{ post.id }}" class="space-y-4">
                <!-- コメント本文 -->
                <textarea 
                name="comment" 
                rows="3" 
                placeholder="コメントを入力..." 
                class="w-full border rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400"
                required
                ></textarea>

                <!-- コメントタイプ選択 -->
                <div>
                <label for="comment_type" class="block text-sm font-medium text-gray-700 mb-1">コメントする人のタイプ</label>
                <select 
                    name="comment_type" 
                    id="comment_type"
                    class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
                    required
                >
                    <option value="">選択してください</option>
                    <option value="観光者">観光者</option>
                    <option value="地元の人">地元の人」</option>
                </select>
                </div>

                <!-- 送信ボタン -->
                <button 
                type="submit" 
                class="px-5 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow hover:bg-blue-700 transition"
                >
                送信
                </button>
            </form>
        </section>
    </main>

  <footer class="text-center text-gray-500 text-sm mt-10 mb-4">
    &copy; 2025 あなたのアプリ名
  </footer>
</body>
</html>
